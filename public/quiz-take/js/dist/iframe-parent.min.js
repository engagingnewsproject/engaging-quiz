function enpIframeSetTimeoutLoadCheck(){enpIframeLoadAlreadyrunflag||enpIframe.onLoadEnpIframe()}var enpIframe=function(){var e=window.location.href,t=!1,n=!1,a=!1,o=!1;return{receiveEnpIframeMessage:function(e){var t,n,a;return a={},!/https?:\/\/(?:dev\b(?!.)|(?:(?:local|dev|test)\.)?engagingnewsproject\.org|engagingnews\.(?:staging\.)?wpengine\.com)/.test(e.origin)&&("string"==typeof e.data&&(data=JSON.parse(e.data),n="0"===data.ab_test_id?"enp-quiz-iframe-"+data.quiz_id:"enp-ab-test-iframe-"+data.ab_test_id,t=document.getElementById(n),"setHeight"===data.action?a.setEnpQuizHeight=enpIframe.setEnpQuizHeight(t,data.height):"scrollToQuiz"===data.action||"quizRestarted"===data.action?a.enpScrollToQuizResponse=enpIframe.enpScrollToQuiz(t):"sendURL"===data.action&&(a.sendEnpParentURLResponse=enpIframe.sendEnpParentURL(),enpIframe.saveEnpEmbedSite(e.origin,data,enpIframe.enpHandleEmbedSiteResponse)),a))},onLoadEnpIframe:function(){enpIframe.addEnpIframeStyles(),enpIframe.getEnpQuizHeights(),enpIframe.sendEnpParentURL()},getEnpQuizHeights:function(){var e,t,n;e=document.getElementsByClassName("enp-quiz-iframe");for(var a=0;a<e.length;++a)t=e[a],n='{"status":"request","action":"sendBodyHeight"}',t.contentWindow.postMessage(n,t.src)},sendEnpParentURL:function(){var t,n,a;if(/https?:\/\/(?:dev\/quiz|(?:(?:local|dev|test)\.)?engagingnewsproject\.org)\/enp-quiz\/quiz-preview\/\d+\b/.test(e))return!1;t=document.getElementsByClassName("enp-quiz-iframe");for(var o=0;o<t.length;++o)n=t[o],a='{"status":"request","action":"setShareURL","parentURL":"'+e+'"}',n.contentWindow.postMessage(a,n.src)},setEnpQuizHeight:function(e,t){var n=!1;return/([0-9])px/.test(t)&&(e.style.height=t,n=t),n},enpScrollToQuiz:function(e){var t=!1,n=e.getBoundingClientRect().top;return-20<n&&n<100?t="noScroll":(scrollBy(0,n-10),t="scrolledTop"),t},addEnpIframeStyles:function(){var e=".enp-quiz-iframe { -webkit-transition: all .25s ease-in-out;transition: all .25s ease-in-out; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)},enpSerialize:function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t=t.slice(0,t.length-1)},saveEnpEmbedSite:function(e,n,a){if(t===!0)return!1;var o,i=new XMLHttpRequest;i.open("POST",e+"/wp-content/plugins/enp-quiz/database/class-enp_quiz_save_embed.php"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status?(t=!0,o=JSON.parse(i.responseText),"success"===o.status?(o.origin=e,o.quiz_id=n.quiz_id,"function"==typeof a&&a(o)):console.log("XHR request for saveEnpEmbedSite successful but returned response error: "+JSON.stringify(o))):200!==i.status&&console.log("Request failed.  Returned status of "+i.status)},n.embed_site_url=window.location.href,n.embed_site_name=window.location.href,n.save="embed_site",n.action="insert",n.doing_ajax="true",i.send(encodeURI(enpIframe.enpSerialize(n)))},saveEnpEmbedQuiz:function(t,a){if(n===!0)return!1;var o,i=new XMLHttpRequest;i.open("POST",t.origin+"/wp-content/plugins/enp-quiz/database/class-enp_quiz_save_embed.php"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status?(n=!0,o=JSON.parse(i.responseText),"success"===o.status?"function"==typeof a&&a(o):console.log("XHR request for saveEnpEmbedQuiz successful but returned response error: "+JSON.stringify(o))):200!==i.status&&console.log("Request failed.  Returned status of "+i.status)},embed_quiz={save:"embed_quiz",embed_site_id:t.embed_site_id,quiz_id:t.quiz_id,embed_quiz_url:e,doing_ajax:"true"},i.send(encodeURI(enpIframe.enpSerialize(embed_quiz)))},enpHandleEmbedSiteResponse:function(e){return a=e.embed_site_id,0<parseInt(a)?(enpIframe.saveEnpEmbedQuiz(e,enpIframe.enpHandleEmbedQuizResponse),e):void console.log("Could't locate a valid Embed Site")},enpHandleEmbedQuizResponse:function(e){return o=e.embed_quiz_id,0<parseInt(o)?e:void console.log("Could't locate a valid Embed Quiz")},getSaveEmbedQuizComplete:function(){return t},getSaveEmbedSiteComplete:function(){return t},getEmbedSiteID:function(){return a},getEmbedQuizID:function(){return o}}}();window.addEventListener("message",enpIframe.receiveEnpIframeMessage,!1);var enpIframeLoadAlreadyrunflag=0;if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){enpIframeLoadAlreadyrunflag=1,enpIframe.onLoadEnpIframe()},!1);else if(document.all&&!window.opera){document.open(),document.write('<script type="text/javascript" id="enpIframeContentloadtag" defer="defer" src="javascript:void(0)"></script>'),document.close();var enpIframeContentloadtag=document.getElementById("enpIframeContentloadtag");enpIframeContentloadtag.onreadystatechange=function(){"complete"==this.readyState&&(enpIframeLoadAlreadyrunflag=1,enpIframe.onLoadEnpIframe())}}window.onload=function(){setTimeout(enpIframeSetTimeoutLoadCheck,0)};