jQuery(document).ready(function(t){function n(t,n,e){var o=t["question_responses_"+n+"_percentage"];return o=_.reformat_number(o,100),explanationTemplate=p({question_id:t.question_id,question_explanation:t.question_explanation,question_explanation_title:n,question_explanation_percentage:o}),"function"==typeof e&&e(explanation),explanationTemplate}function e(n){if("mc"===n.question_type)for(var e in n.mc_option)mc_option_id=n.mc_option[e].mc_option_id,mc_option_correct=n.mc_option[e].mc_option_correct,t("#enp-option__"+mc_option_id).data("correct",mc_option_correct)}function o(n,e){var o;return t(".enp-option__input",n).each(function(n,i){return"1"===t(this).data("correct")?(o=t(this),"function"==typeof e&&e(t(this)),!1):void 0}),o}function i(n,e){var o;return t(".enp-option__input",n).each(function(n,i){"0"===t(this).data("correct")&&(o=t(this),"function"==typeof e&&e(t(this)))}),o}function a(t){t.hasClass("enp-option__input--incorrect-clicked")||t.addClass("enp-option__input--slide-hide")}function c(t){t.addClass("enp-option__input--correct")}function r(t,n,e){console.log(e.responseText)}_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var p=(_.template(t("#mc_option_template").html()),_.template(t("#question_template").html()),_.template(t("#question_image_template").html()),_.template(t("#question_explanation_template").html()));_.reformat_number=function(t,n,e){return""===n&&(n=1),""===e&&(e=0),t*=n,t=t.toFixed(e)},e(question_json),t(document).on("click",".enp-option__label",function(e){var _=t(this).prev(".enp-option__input"),r=_.data("correct");t(".enp-question__container").addClass("enp-question__container--explanation").removeClass("enp-question__container--unanswered"),"1"===r?(correct_string="correct",_.addClass("enp-option__input--correct-clicked"),c(_)):(correct_string="incorrect",_.addClass("enp-option__input--incorrect-clicked"),correctInput=o(t(".enp-question__fieldset"),c)),i(t(".enp-question__fieldset"),a);var p=n(question_json,correct_string);t(".enp-question__submit").before(p)}),t(".enp-option__input").change(function(){console.log("changed"),t(".enp-question__submit").trigger("click")}),t(document).on("click",".enp-question__submit",function(n){n.preventDefault(),url=t(".enp-question__form").attr("action"),userAction=t(this).attr("name")+"="+t(this).val(),doing_ajax="doing_ajax=doing_ajax",data=t(".enp-question__form").serialize()+"&"+userAction+"&"+doing_ajax,console.log(data),t.ajax({type:"POST",url:url,data:data,dataType:"json"}).done(r).fail(function(t,n,e){console.log("AJAX failed",t.getAllResponseHeaders(),n,e)}).then(function(t,n,e){console.log("AJAX after finished")}).always(function(){})})});