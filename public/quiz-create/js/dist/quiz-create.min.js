jQuery(document).ready(function(p){function u(e){return p("#enp-question--"+e+"__accordion-container")}function c(n){return p(".enp-question-content").each(function(e){if(parseInt(p(".enp-question-id",this).val())===parseInt(n))return questionIndex=e,!1}),questionIndex}function o(e){return parseInt(p(".enp-question-id",e).val())}function d(e,n){for(var i in n)if(parseInt(n[i].question_id)===parseInt(e))for(var t in n[i].mc_option)if("insert"===n[i].mc_option[t].action)return n[i].mc_option[t];return!1}function m(e,n){for(var i in n)if(parseInt(n[i].question_id)===parseInt(e))return n[i];return!1}function s(e){return'<div class="spinner '+e+'"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'}function n(e){var n=p(".enp-question-title__textarea",e).val(),n={title:i(n),content:e,baseID:e.attr("id"),container:!0};n=enp_accordion__create_headers(n),enp_accordion__setup(n)}function i(e){return void 0===e||""===e?e="Question":200<e.length&&(e=e.slice(0,200),e+="â€¦"),e}function r(e,n,i){a(e,n,i),e.children&&function e(n,i,t){var o;for(var s=0;s<n.length;s++)a(o=n[s],i,t),o.children&&e(o.children,i,t)}(e.children,n,i)}function a(e,n,i){for(var t,o=0,s=e.attributes,r=s.length;o<r;o++)t=s[o],(newAttrVal=t.nodeValue.replace(n,i))!==t.nodeValue&&("value"===t.nodeName?p(e).val(newAttrVal):e.setAttribute(t.nodeName,newAttrVal))}function t(e){"undefined"==typeof tinymce?setTimeout(function(){t(e)},200):tinymce.init({selector:"#enp-question-explanation__"+e,menubar:!1,statusbar:!1,toolbar:"bold italic link blockquote",plugins:"link",link_assume_external_targets:"http",placeholder:"Your cerebellum can predict your own actions, so you're unable to 'surprise' yourself with a tickle.",inline:!1})}function g(e){e=e.question;p(e).each(function(e){t(this.question_id)})}_.middleNumber=function(e,n){return(e+n)/2},p(".enp-quiz-submit").click(function(e){"undefined"!=typeof tinymce&&(tinymce.triggerSave(),$theQuestions=p(".enp-accordion-container"),p.each($theQuestions,function(e){obj=o(this),p(this).find("#enp-question-explanation__"+obj);var n=tinymce.activeEditor.getContent({format:"raw"});p(this);tinymce.activeEditor.setContent(n,{format:"raw"}),p("#enp-quiz-create-form").serializeArray()}))}),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var l,q,h=_.template(p("#question_template").html()),v=_.template(p("#question_image_template").html()),f=_.template(p("#question_image_upload_button_template").html()),I=_.template(p("#question_image_upload_template").html()),w=_.template(p("#mc_option_template").html()),b=_.template(p("#slider_template").html()),D=_.template(p("#slider_take_template").html()),E=_.template(p("#slider_take_range_helpers_template").html()),S=(p(".enp-question-content").each(function(e){n(p(this)),0===p(".enp-question-image",this).length&&p(".enp-question-image__input",this).after(f())}),p(".enp-image-upload__label, .enp-button__question-image-upload, .enp-question-image-upload__input").hide(),p(".enp-slider-options").each(function(){F(p(this))}),window.location.href);function C(e,n){var i=Math.floor(1e3*Math.random()+1);p(".enp-quiz-message-ajax-container").append('<div class="enp-quiz-message enp-quiz-message--ajax enp-quiz-message--'+n+" enp-container enp-message-"+i+'"><p class="enp-message__list enp-message__list--'+n+'">'+e+"</p></div>"),p(".enp-message-"+i).delay(5e3).fadeOut(function(){p(this).remove()})}function x(){p(".enp-question-content").each(function(e){var n,i,t;n=o(p(this)),e=e,i=p("#enp-question--"+n),i=p(".enp-question-order",i),t=i.val(),parseInt(t)!==e&&(console.log("updating "+n+" from "+t+" to "+e),t=new RegExp("enp_question\\["+t+"\\]"),r(document.getElementById("enp-question--"+n),t,"enp_question["+e+"]"),i.val(e))})}function V(e){p(".enp-mc-option--inputs",e).each(function(e){var n,i,t;n=p(this),e=e,i=p(".enp-mc-option-order",n),t=i.val(),parseInt(t)!==e&&(t=new RegExp("\\]\\[mc_option\\]\\["+t+"\\]\\["),r(document.getElementById(n.attr("id")),t,"][mc_option]["+e+"]["),i.val(e))})}function L(){var e;templateParams={question_id:"newQuestionTemplateID",question_position:"newQuestionPosition"},p(".enp-quiz-create__questions").append(h(templateParams)),newQuestion=p("#enp-question--newQuestionTemplateID"),questionImageUpload=I(templateParams),p(".enp-question-image__input",newQuestion).after(questionImageUpload),p(".enp-image-upload__label, .enp-button__question-image-upload, .enp-question-image-upload__input",newQuestion).hide(),p(".enp-question-image__input",newQuestion).after(f()),z("newQuestionTemplateID"),temp_slider=b({question_id:e="newQuestionTemplateID",question_position:"newQuestionPosition",slider_id:"newSliderID",slider_range_low:"0",slider_range_high:"10",slider_correct_low:"5",slider_correct_high:"5",slider_increment:"1",slider_prefix:"",slider_suffix:""}),p(temp_slider).appendTo("#enp-question--"+e+" .enp-question"),n(p("#enp-question--newQuestionTemplateID")),p("#enp-question--newQuestionTemplateID__accordion-header").focus()}function U(e,n,i){r(document.getElementById("enp-question--newQuestionTemplateID__accordion-container"),/newQuestionTemplateID/,e),r(document.getElementById("enp-question--"+e),/newQuestionPosition/,c(e)),y(n,e),n=i,i=e,r(new_slider_el=document.querySelector("#enp-question--"+i+" .enp-slider-options"),/newQuestionPosition/,c(i)),r(new_slider_el,/newSliderID/,n),F("#enp-question--"+i+" .enp-slider-options")}function H(e){var n=p("#enp-mc-option--"+e).closest(".enp-question-content");p("#enp-mc-option--"+e).remove(),V(n)}function z(e){temp_mc_option=w({question_id:e,question_position:"newQuestionPosition",mc_option_id:"newMCOptionID",mc_option_position:"newMCOptionPosition"}),p("#enp-question--"+e+" .enp-mc-option--add").before(temp_mc_option),p("#enp-question--"+e+" .enp-mc-option--inputs:last .enp-mc-option__input").focus()}function y(e,n){r(new_mcOption_el=document.querySelector("#enp-question--"+n+" #enp-mc-option--newMCOptionID"),/newQuestionPosition/,c(n)),new_mc_option_index=p("#enp-question--"+n+" .enp-mc-option--inputs").length-1,r(new_mcOption_el,/newMCOptionPosition/,new_mc_option_index),r(new_mcOption_el,/newMCOptionID/,e)}function e(e,n){low=e.slider("option","min"),high=e.slider("option","max"),interval=e.slider("option","step"),sliderValue=R(low,high,interval),e.slider("value",sliderValue),n.val(sliderValue)}function R(e,n,i){return e=parseFloat(e),n=parseFloat(n),i=parseFloat(i),totalIntervals=(n-e)/i,middleInterval=totalIntervals/2*i+e,remainder=middleInterval%i,middleInterval-=remainder}function A(e,n){return e.closest(".enp-slider-options").find(n)}function O(e){var n=P(e),i=p(".enp-slider-correct-low__input",n);Q(e),p(".enp-slider-correct-answer-range",n).removeClass("enp-slider-correct-answer-range--remove-range").addClass("enp-slider-correct-answer-range--add-range").html('<svg class="enp-icon enp-slider-correct-answer-range__icon"><use xlink:href="#icon-add"><title>Add</title></use></svg> Answer Range'),lowCorrectVal=i.val(),p(".enp-slider-correct-high__input",n).val(lowCorrectVal),i.data("correctRangeInUse",!1)}function Q(e){e=P(e);p(".enp-slider-correct__helper",e).addClass("enp-slider-correct__helper--hidden").text(""),p(".enp-slider-correct-high__input-container",e).addClass("enp-slider-correct-high__input-container--hidden"),p(".enp-slider-correct-low__label",e).text("Slider Answer")}function k(e){var e=P(e),n=p(".enp-slider-correct-low__input",e),i=p(".enp-slider-correct-high__input",e);p(".enp-slider-correct-low__label",e).text("Slider Answer Low"),p(".enp-slider-correct__helper",e).removeClass("enp-slider-correct__helper--hidden").text("to"),p(".enp-slider-correct-high__input-container",e).removeClass("enp-slider-correct-high__input-container--hidden"),p(".enp-slider-correct-answer-range",e).removeClass("enp-slider-correct-answer-range--add-range").addClass("enp-slider-correct-answer-range--remove-range").html('<svg class="enp-icon enp-slider-correct-answer-range__icon"><use xlink:href="#icon-close"><title>Remove Answer Range</title></use></svg>'),highCorrectVal=parseFloat(i.val()),lowCorrectVal=parseFloat(n.val()),increment=parseFloat(p(".enp-slider-increment__input",e).val()),highCorrectVal<=lowCorrectVal&&i.val(lowCorrectVal+increment),i.focus(),n.data("correctRangeInUse",!0)}function P(e){var n;return p(".enp-slider-options").each(function(){if(p(this).data("sliderID")===e)return n=p(this),!1}),n}function F(e){var n,i,t,o,s;sliderID=p(".enp-slider-id",e).val(),p(e).data("sliderID",sliderID),i=p(".enp-slider-id",n=e).val(),t=parseFloat(p(".enp-slider-range-low__input",n).val()),o=parseFloat(p(".enp-slider-range-high__input",n).val()),s=parseFloat(p(".enp-slider-increment__input",n).val()),t={slider_id:i,slider_range_low:t,slider_range_high:o,slider_start:R(t,o,s),slider_increment:s,slider_prefix:p(".enp-slider-prefix__input",n).val(),slider_suffix:p(".enp-slider-suffix__input",n).val(),slider_input_size:p(".enp-slider-range-high__input",n).val().length},slider=D(t),sliderExample=p('<div class="enp-slider-preview"></div>').html(slider),p(sliderExample).prependTo(n),p(".enp-slider__label",n).after('<label for="enp-slider-input__'+i+'" class="enp-label enp-label--slider-preview">Slider Preview</label>'),p(".enp-slider__label",n).remove(),B(p(".enp-slider-input__input",n),t),lowCorrectInput=p(".enp-slider-correct-low__input",e),highCorrectInput=p(".enp-slider-correct-high__input",e),lowCorrectInput.data("highCorrectInput",highCorrectInput),highCorrectInput.data("lowCorrectInput",lowCorrectInput),correctLow=parseFloat(lowCorrectInput.val()),correctHigh=parseFloat(highCorrectInput.val()),lowCorrectInput.is("[readonly]")?correctLow===correctHigh&&Q(sliderID):(p(".enp-slider-correct-high__container",e).append('<button class="enp-slider-correct-answer-range" type="button"></button>'),(correctLow===correctHigh?O:k)(sliderID)),p("input, button",e).each(function(){p(this).data("sliderID",sliderID)}),accordion={title:"Advanced Slider Options",content:p(".enp-slider-advanced-options__content",e),baseID:sliderID},accordion=enp_accordion__create_headers(accordion),enp_accordion__setup(accordion)}function M(e,n,i){if(void 0===i.responseJSON)return T(),C("Something went wrong. Please reload the page and try again.","error"),!1;var t,o,s,r,i=(e=i.responseJSON)&&e.user_action,a=(userActionAction=i?i.action:void 0,userActionElement=i?i.element:void 0,"success"===e.status&&"insert"===e.action&&(i=e,p("#enp-quiz-id").val(i.quiz_id),t=p("body").innerHTML,r="Quiz: "+(r=p(".enp-quiz-title__textarea").val()),o=quizCreate.quiz_create_url+i.quiz_id,g(i),window.history.pushState({html:t,pageTitle:r},"",o),p(".enp-quiz-form__save").show().addClass("enp-quiz-form__save--reveal"),p(".enp-btn--next-step").show().addClass("enp-btn--next-step--reveal"),p(".enp-quiz-breadcrumbs__link--preview").removeClass("enp-quiz-breadcrumbs__link--disabled")),"add"==userActionAction&&"question"==userActionElement?!1!==(i=(e=>{for(var n in e)if("insert"===e[n].action)return e[n];return!1})(e.question))&&void 0!==i.question_id&&0<parseInt(i.question_id)?(new_questionID=i.question_id,new_mcOption=d(new_questionID,e.question),new_sliderID=i.slider.slider_id,U(new_questionID,new_mcOption.mc_option_id,new_sliderID),g(e)):(p("#enp-question--newQuestionTemplateID__accordion-header").remove(),p("#enp-question--newQuestionTemplateID").remove(),C("Question could not be added. Please reload the page and try again.","error")):"delete"==userActionAction&&"question"==userActionElement?(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(u(questionID).remove(),x()):(u(questionID).removeClass("enp-question--remove"),C("Question could not be deleted. Please reload the page and try again.","error"))):"delete"==userActionAction&&"mc_option"==userActionElement?(t=e.user_action.details.mc_option_id,!1!==(mcOptionResponse=((e,n)=>{for(var i in n)for(var t in n[i].mc_option)if(parseInt(n[i].mc_option[t].mc_option_id)===parseInt(e))return n[i].mc_option[t];return!1})(t,e.question))&&"update"===mcOptionResponse.action&&"success"===mcOptionResponse.status?H(t):((r=p("#enp-mc-option--"+(r=t))).removeClass("enp-mc-option--remove"),p(".enp-mc-option__button--delete",r).focus(),C("Multiple Choice Option could not be deleted. Please reload the page and try again.","error"))):"add"==userActionAction&&"mc_option"==userActionElement?!1!==(o=d(questionID=e.user_action.details.question_id,e.question))&&void 0!==o.mc_option_id&&0<parseInt(o.mc_option_id)?y(o.mc_option_id,questionID):(i=questionID,p("#enp-question--"+i+" #enp-mc-option--newMCOptionID").remove(),C("Multiple Choice Option could not be added. Please reload the page and try again.","error")):"set_correct"==userActionAction&&"mc_option"==userActionElement?(i=e.user_action.details.mc_option_id,s=e.user_action.details.question_id,p("#enp-mc-option--"+i).hasClass("enp-mc-option--correct")?p("#enp-mc-option--"+i).removeClass("enp-mc-option--correct"):(p("#enp-question--"+s+" .enp-mc-option").removeClass("enp-mc-option--correct"),p("#enp-mc-option--"+i).addClass("enp-mc-option--correct"))):"upload"==userActionAction&&"question_image"==userActionElement?(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(s=questionResponse,questionID=s.question_id,p("#enp-question--"+questionID+" .enp-question-image-upload").remove(),p("#enp-question--"+questionID+" .enp-question-image-upload__input").remove(),p("#enp-question--"+questionID+" .enp-image-upload-wait").remove(),p("#enp-question--"+questionID+" .enp-question-image__input").val(s.question_image),templateParams={question_id:questionID,question_position:c(questionID)},p("#enp-question--"+questionID+" .enp-question-image__input").after(v(templateParams)),imageFile=(imageFile=s.question_image).replace(/-original/g,"580w"),imageURL=quizCreate.quiz_image_url+p("#enp-quiz-id").val()+"/"+questionID+"/"+imageFile,p("#enp-question--"+questionID+" .enp-question-image__container").prepend('<img class="enp-question-image enp-question-image" src="'+imageURL+'" alt="'+s.question_image_alt+'"/>')):temp_unsetAddQuestionImage(questionID)):"delete"==userActionAction&&"question_image"==userActionElement&&(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(i=questionResponse,questionID=i.question_id,i=p("#enp-question--"+questionID),p(".enp-question-image__container",i).remove(),p(".enp-question-image__input",i).val(""),templateParams={question_id:questionID,question_position:c(questionID)},p(".enp-question-image__input",i).after(I(templateParams)),p(".enp-image-upload__label, .enp-button__question-image-upload, .enp-question-image-upload__input",i).hide(),p(".enp-question-image__input",i).after(f()),p(".enp-question-image-upload",i).focus()):(i=questionID,p("#enp-question--"+i+" .enp-question-image__container").removeClass("enp-question__image--remove"),oldImageFilename=p("#enp-question-image-"+i).data("image_filename"),p("#enp-question-image-"+i).val(oldImageFilename),C("Image could not be deleted. Please reload the page and try again.","error"))),e.message);if(a&&"object"==typeof a&&(void 0!==a.success&&0<a.success.length&&C(a.success[0],"success"),a.error)&&0<a.error.length)for(var l=0;l<a.error.length;l++)C(a.error[l],"error");p(".enp-quiz-message--error").length&&(p(".enp-quiz-message--error").remove(),p(".enp-accordion-header").removeClass("question-has-error"),p(".enp-accordion-header__error").remove())}function T(){p(".enp-quiz-submit").removeClass("enp-quiz-submit--wait"),p(".enp-quiz-message--saving").remove()}function B(i,e){(slider=p('<div class="enp-slider" aria-hidden="true" role="presentation"></div>')).data("sliderID",e.slider_id),p(i).data("sliderID",e.slider_id),p(slider).slider({range:"min",value:parseFloat(e.slider_start),min:parseFloat(e.slider_range_low),max:parseFloat(e.slider_range_high),step:parseFloat(e.slider_increment),slide:function(e,n){p(i).val(n.value)}}),(sliderInputContainer=p(i).parent()).after(slider),sliderTakeRangeHelpers=E({slider_range_low:parseFloat(e.slider_range_low),slider_range_high:parseFloat(e.slider_range_high)}),sliderInputContainer.append(sliderTakeRangeHelpers)}function j(e,n){var i;return p(".enp-slider").each(function(){if(p(this).data("sliderID")===e)return i=p(this),"function"==typeof n&&n(p(this)),!1}),i}!0===new RegExp("quiz-create/new").test(S)&&p(".enp-quiz-form__save, .enp-btn--next-step").hide(),0!==p(".enp-message__item--error").length&&(l=/Question \d+/,q={},p(".enp-message__item--error").each(function(){var e=p(this).text().trim(),n=e.match(l);null!==n&&(n=n[0].replace(/Question /,""),n=parseInt(n,10)-1,q[n]||(q[n]=[]),q[n].push(e))}),p.each(q,function(e,n){e=p(".enp-question-content:eq("+e+")").prev(".enp-accordion-header");e.length&&!e.hasClass("question-has-error")&&(e.addClass("question-has-error"),e.find(".enp-accordion-header__error").remove(),n='<span class="enp-accordion-header__error" role="alert">'+n.join(" ")+"</span>",e.find(".enp-accordion-header__title").after(n))})),p(document).on("focusin",function(e){p(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()}),p(".enp-quiz-message--success").not(".enp-quiz-message--ajax").delay(5e3).fadeOut(function(){p(this).remove()}),$theQuestions=p(".enp-accordion-container"),p.each($theQuestions,function(e){t(obj=o(this))}),p(document).on("click",".enp-mc-option-image-upload__trigger",function(e){e.preventDefault(),p(this).closest(".enp-mc-option").find(".enp-mc-option-image-upload__input").trigger("click")}),p(document).on("change",".enp-mc-option-image-upload__input",function(){var e,n,i=p(this).closest(".enp-mc-option-image-upload").find(".enp-mc-option-image-preview"),t=this.files&&this.files[0];i.length&&((e=i.data("object-url"))&&(URL.revokeObjectURL(e),i.removeData("object-url")),i.empty().addClass("enp-mc-option-image-preview--hidden"),t)&&0===t.type.indexOf("image/")&&(e=URL.createObjectURL(t),t=p('<img class="enp-mc-option-image enp-mc-option-image--preview" alt="">').attr("src",e),n=p('<button type="button" class="enp-mc-option-image-preview__clear" aria-label="Remove image"><svg class="enp-icon enp-icon--delete"><use xlink:href="#icon-delete"></use></svg></button>'),i.data("object-url",e).append(t).append(n).removeClass("enp-mc-option-image-preview--hidden"))}),p(document).on("click",".enp-mc-option-image-preview__clear",function(e){e.preventDefault();var e=p(this).closest(".enp-mc-option-image-preview"),n=e.closest(".enp-mc-option-image-upload").find(".enp-mc-option-image-upload__input"),i=e.data("object-url");i&&(URL.revokeObjectURL(i),e.removeData("object-url")),n.val(""),e.empty().addClass("enp-mc-option-image-preview--hidden")}),p(document).on("keyup",".enp-question-title__textarea",function(){question_title=i(p(this).val()),p(this).closest(".enp-question-content").prev(".enp-accordion-header").find(".enp-accordion-header__title").text(question_title)}),p(document).on("click",".enp-quiz-breadcrumbs__link--preview, .enp-quiz-breadcrumbs__link--publish",function(e){e.preventDefault(),p(".enp-btn--next-step").trigger("click")}),p("#enp-quiz").append('<section class="enp-quiz-message-ajax-container" aria-live="assertive"></section>'),p(".enp-question__move").remove(),p(".enp-quiz-create__questions").sortable({handle:".enp-accordion-header",placeholder:"enp-sort__placeholder",cancel:""}),p(".enp-quiz-create__questions").on("sortstart",function(e,n){p("body").addClass("ui-sortable--sorting"),p(this).sortable("refreshPositions"),p(n.placeholder).css("height",p(n.item).height())}),p(".enp-quiz-create__questions").on("sortstop",function(e,n){p("body").removeClass("ui-sortable--sorting")}),p(".enp-quiz-create__questions").on("sortupdate",function(e,o){setTimeout(function(){var e=p(o.item).offset().top,n=e+p(o.item).outerHeight(),i=p(window).scrollTop(),t=i+p(window).height();i<n&&e<t||window.scrollTo(0,e-20)},200),x(),p(".enp-quiz-form__save").trigger("click")}),p(document).on("click",".enp-question-image-upload",function(){(imageUploadInput=p(this).siblings(".enp-question-image-upload__input")).trigger("click")}),p(document).on("change",".enp-question-image-upload__input",function(){(imageSubmit=p(this).siblings(".enp-button__question-image-upload")).trigger("click"),imageSubmit.siblings(".enp-question-image-alt__input").focus()}),p(document).on("blur",".enp-slider-range-low__input",function(){sliderID=p(this).data("sliderID"),slider=j(sliderID),sliderRangeLow=parseFloat(p(this).val()),slider.slider("option","min",sliderRangeLow),(sliderInput=p("#enp-slider-input__"+sliderID)).attr("min",sliderRangeLow),e(slider,sliderInput)}),p(document).on("input",".enp-slider-range-low__input",function(){var e=p(this).val();(sliderPreview=A(p(this),".enp-slider_input__range-helper__number--low")).text(e)}),p(document).on("input",".enp-slider-range-high__input",function(){var e=p(this).val();(sliderPreview=A(p(this),".enp-slider_input__range-helper__number--high")).text(e)}),p(document).on("blur",".enp-slider-range-high__input",function(){sliderID=p(this).data("sliderID"),slider=j(sliderID),sliderRangeHigh=parseFloat(p(this).val()),slider.slider("option","max",sliderRangeHigh),(sliderInput=p("#enp-slider-input__"+sliderID)).attr("max",sliderRangeHigh),e(slider,sliderInput)}),p(document).on("input",".enp-slider-correct-low__input",function(){!1===p(this).data("correctRangeInUse")&&(highCorrectInput=p(this).data("highCorrectInput"),lowCorrectVal=p(this).val(),highCorrectInput.val(lowCorrectVal))}),p(document).on("blur",".enp-slider-increment__input",function(){sliderID=p(this).data("sliderID"),slider=j(sliderID),sliderIncrement=parseFloat(p(this).val()),slider.slider("option","step",sliderIncrement),(sliderInput=p("#enp-slider-input__"+sliderID)).attr("step",sliderIncrement),e(slider,sliderInput)}),p(document).on("input",".enp-slider-prefix__input",function(){var e=p(this).val();(sliderPreview=A(p(this),".enp-slider-input__prefix")).text(e)}),p(document).on("input",".enp-slider-suffix__input",function(){var e=p(this).val();(sliderPreview=A(p(this),".enp-slider-input__suffix")).text(e)}),p(document).on("click",".enp-slider-correct-answer-range",function(){sliderID=p(this).data("sliderID"),(p(this).hasClass("enp-slider-correct-answer-range--add-range")?k:O)(sliderID)}),p(document).on("click",".enp-quiz-submit",function(e){if(!p(this).hasClass("enp-btn--next-step")){if(e.preventDefault(),"1"===p("#enp-quiz-new").val()&&""===p(".enp-quiz-title__textarea").val())return p(".enp-quiz-title__textarea").focus(),C("Please enter a title for your quiz.","error"),!1;if(p(this).hasClass("enp-question__button--delete"))if(!1===confirm("Are you sure you want to delete this question?"))return!1;if(p(this).hasClass("enp-quiz-submit--wait"))return!1;p(".enp-quiz-message-ajax-container").append('<div class="enp-quiz-message--saving">'+s("enp-quiz-message--saving__spinner")+'<div class="enp-quiz-message--saving__text">Saving</div></div>'),p(".enp-quiz-submit").addClass("enp-quiz-submit--wait");var n,i,t,e=p(this).val();e=e,"undefined"!=typeof tinymce&&tinymce.triggerSave(),o=document.getElementById("enp-quiz-create-form"),(o=new FormData(o)).append("enp-quiz-submit",e),o.append("action","save_quiz");-1<e.indexOf("add-question")?L():-1<e.indexOf("add-mc-option__question")?(n=/add-mc-option__question-/g,z(questionID=e.replace(n,""))):-1<e.indexOf("question--delete")?(n=/question--delete-/g,t=questionID=e.replace(n,""),(i=u(t)).addClass("enp-question--remove"),p("#enp-question--"+t),i.next().find("enp-question-content").focus()):-1<e.indexOf("mc-option--delete")?(n=/mc-option--delete-/g,t=mcOptionID=e.replace(n,""),(t=p("#enp-mc-option--"+t)).next(".enp-mc-option").find("button:first").focus(),t.addClass("enp-mc-option--remove")):-1<e.indexOf("question-image--upload")?(n=/question-image--upload-/g,questionID=e.replace(n,""),p("#enp-question--"+questionID+" .enp-question-image-upload").hide(),p("#enp-question--"+questionID+" .enp-question-image-upload").after(s("enp-image-upload-wait"))):-1<e.indexOf("question-image--delete")&&(n=/question-image--delete-/g,e=questionID=e.replace(n,""),p("#enp-question--"+e+" .enp-question-image__container").addClass("enp-question__image--remove"),imageInput=p("#enp-question-image-"+e),imageFilename=imageInput.val(),imageInput.data("image_filename",imageFilename),imageInput.val("")),p(".enp-quiz-message--success").remove(),p.ajax({type:"POST",url:quizCreate.ajax_url,data:o,processData:!1,contentType:!1}).done(M).fail(function(e,n,i){console.log("AJAX failed",e.getAllResponseHeaders(),n,i)}).then(function(e,n,i){}).always(function(){T()})}var o}),p(document).on("input",".enp-slider-input__input",function(){var e=j(p(this).data("sliderID")),n=p(this).val();e.slider("value",n),sliderVal=e.slider("value")}),p(document).on("blur",".enp-slider-input__input",function(){var e,n;input=p(this),n=j(p(this).data("sliderID")),e=input.val(),n=n.slider("value"),parseInt(n)!==parseInt(e)&&(input.val(n),input.addClass("enp-slider-input__input--invalid-animation"),setTimeout(function(){input.removeClass("enp-slider-input__input--invalid-animation")},500))})});