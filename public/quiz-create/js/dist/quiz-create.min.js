jQuery(document).ready(function(l){function u(e){return l("#enp-question--"+e+"__accordion-container")}function c(n){return l(".enp-question-content").each(function(e){if(parseInt(l(".enp-question-id",this).val())===parseInt(n))return questionIndex=e,!1}),questionIndex}function o(e){return parseInt(l(".enp-question-id",e).val())}function d(e,n){for(var i in n)if(parseInt(n[i].question_id)===parseInt(e))for(var t in n[i].mc_option)if("insert"===n[i].mc_option[t].action)return n[i].mc_option[t];return!1}function m(e,n){for(var i in n)if(parseInt(n[i].question_id)===parseInt(e))return n[i];return!1}function s(e){return'<div class="spinner '+e+'"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'}function n(e){var n=l(".enp-question-title__textarea",e).val(),n={title:i(n),content:e,baseID:e.attr("id"),container:!0};n=enp_accordion__create_headers(n),enp_accordion__setup(n)}function i(e){return void 0===e||""===e?e="Question":200<e.length&&(e=e.slice(0,200),e+="â€¦"),e}function r(e,n,i){a(e,n,i),e.children&&function e(n,i,t){var o;for(var s=0;s<n.length;s++)a(o=n[s],i,t),o.children&&e(o.children,i,t)}(e.children,n,i)}function a(e,n,i){for(var t,o=0,s=e.attributes,r=s.length;o<r;o++)t=s[o],(newAttrVal=t.nodeValue.replace(n,i))!==t.nodeValue&&("value"===t.nodeName?l(e).val(newAttrVal):e.setAttribute(t.nodeName,newAttrVal))}function t(e){"undefined"==typeof tinymce?setTimeout(function(){t(e)},200):tinymce.init({selector:"#enp-question-explanation__"+e,menubar:!1,statusbar:!1,toolbar:"bold italic link blockquote",plugins:"link",link_assume_external_targets:"http",placeholder:"Your cerebellum can predict your own actions, so you're unable to 'surprise' yourself with a tickle.",inline:!1})}function g(e){e=e.question;l(e).each(function(e){t(this.question_id)})}_.middleNumber=function(e,n){return(e+n)/2},l(".enp-quiz-submit").click(function(e){"undefined"!=typeof tinymce&&(tinymce.triggerSave(),$theQuestions=l(".enp-accordion-container"),l.each($theQuestions,function(e){obj=o(this),l(this).find("#enp-question-explanation__"+obj);var n=tinymce.activeEditor.getContent({format:"raw"});l(this);tinymce.activeEditor.setContent(n,{format:"raw"}),l("#enp-quiz-create-form").serializeArray()}))}),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var p,q,h=_.template(l("#question_template").html()),v=_.template(l("#question_image_template").html()),f=_.template(l("#question_image_upload_button_template").html()),I=_.template(l("#question_image_upload_template").html()),w=_.template(l("#mc_option_template").html()),b=_.template(l("#slider_template").html()),D=_.template(l("#slider_take_template").html()),E=_.template(l("#slider_take_range_helpers_template").html()),S=(l(".enp-question-content").each(function(e){n(l(this)),0===l(".enp-question-image",this).length&&l(".enp-question-image__input",this).after(f())}),l(".enp-button__question-image-upload, .enp-question-image-upload__input").hide(),l(".enp-slider-options").each(function(){F(l(this))}),window.location.href);function C(e,n){var i=Math.floor(1e3*Math.random()+1);l(".enp-quiz-message-ajax-container").append('<div class="enp-quiz-message enp-quiz-message--ajax enp-quiz-message--'+n+" enp-container enp-message-"+i+'"><p class="enp-message__list enp-message__list--'+n+'">'+e+"</p></div>"),l(".enp-message-"+i).delay(5e3).fadeOut(function(){l(this).remove()})}function x(){l(".enp-question-content").each(function(e){var n,i,t;n=o(l(this)),e=e,i=l("#enp-question--"+n),i=l(".enp-question-order",i),t=i.val(),parseInt(t)!==e&&(console.log("updating "+n+" from "+t+" to "+e),t=new RegExp("enp_question\\["+t+"\\]"),r(document.getElementById("enp-question--"+n),t,"enp_question["+e+"]"),i.val(e))})}function V(e){l(".enp-mc-option--inputs",e).each(function(e){var n,i,t;n=l(this),e=e,i=l(".enp-mc-option-order",n),t=i.val(),parseInt(t)!==e&&(t=new RegExp("\\]\\[mc_option\\]\\["+t+"\\]\\["),r(document.getElementById(n.attr("id")),t,"][mc_option]["+e+"]["),i.val(e))})}function L(){var e;templateParams={question_id:"newQuestionTemplateID",question_position:"newQuestionPosition"},l(".enp-quiz-create__questions").append(h(templateParams)),newQuestion=l("#enp-question--newQuestionTemplateID"),questionImageUpload=I(templateParams),l(".enp-question-image__input",newQuestion).after(questionImageUpload),l(".enp-button__question-image-upload, .enp-question-image-upload__input",newQuestion).hide(),l(".enp-question-image__input",newQuestion).after(f()),z("newQuestionTemplateID"),temp_slider=b({question_id:e="newQuestionTemplateID",question_position:"newQuestionPosition",slider_id:"newSliderID",slider_range_low:"0",slider_range_high:"10",slider_correct_low:"5",slider_correct_high:"5",slider_increment:"1",slider_prefix:"",slider_suffix:""}),l(temp_slider).appendTo("#enp-question--"+e+" .enp-question"),n(l("#enp-question--newQuestionTemplateID")),l("#enp-question--newQuestionTemplateID__accordion-header").focus()}function U(e,n,i){r(document.getElementById("enp-question--newQuestionTemplateID__accordion-container"),/newQuestionTemplateID/,e),r(document.getElementById("enp-question--"+e),/newQuestionPosition/,c(e)),y(n,e),n=i,i=e,r(new_slider_el=document.querySelector("#enp-question--"+i+" .enp-slider-options"),/newQuestionPosition/,c(i)),r(new_slider_el,/newSliderID/,n),F("#enp-question--"+i+" .enp-slider-options")}function H(e){var n=l("#enp-mc-option--"+e).closest(".enp-question-content");l("#enp-mc-option--"+e).remove(),V(n)}function z(e){temp_mc_option=w({question_id:e,question_position:"newQuestionPosition",mc_option_id:"newMCOptionID",mc_option_position:"newMCOptionPosition"}),l("#enp-question--"+e+" .enp-mc-option--add").before(temp_mc_option),l("#enp-question--"+e+" .enp-mc-option--inputs:last .enp-mc-option__input").focus()}function y(e,n){r(new_mcOption_el=document.querySelector("#enp-question--"+n+" #enp-mc-option--newMCOptionID"),/newQuestionPosition/,c(n)),new_mc_option_index=l("#enp-question--"+n+" .enp-mc-option--inputs").length-1,r(new_mcOption_el,/newMCOptionPosition/,new_mc_option_index),r(new_mcOption_el,/newMCOptionID/,e)}function e(e,n){low=e.slider("option","min"),high=e.slider("option","max"),interval=e.slider("option","step"),sliderValue=R(low,high,interval),e.slider("value",sliderValue),n.val(sliderValue)}function R(e,n,i){return e=parseFloat(e),n=parseFloat(n),i=parseFloat(i),totalIntervals=(n-e)/i,middleInterval=totalIntervals/2*i+e,remainder=middleInterval%i,middleInterval-=remainder}function A(e,n){return e.closest(".enp-slider-options").find(n)}function O(e){var n=P(e),i=l(".enp-slider-correct-low__input",n);Q(e),l(".enp-slider-correct-answer-range",n).removeClass("enp-slider-correct-answer-range--remove-range").addClass("enp-slider-correct-answer-range--add-range").html('<svg class="enp-icon enp-slider-correct-answer-range__icon"><use xlink:href="#icon-add"><title>Add</title></use></svg> Answer Range'),lowCorrectVal=i.val(),l(".enp-slider-correct-high__input",n).val(lowCorrectVal),i.data("correctRangeInUse",!1)}function Q(e){e=P(e);l(".enp-slider-correct__helper",e).addClass("enp-slider-correct__helper--hidden").text(""),l(".enp-slider-correct-high__input-container",e).addClass("enp-slider-correct-high__input-container--hidden"),l(".enp-slider-correct-low__label",e).text("Slider Answer")}function k(e){var e=P(e),n=l(".enp-slider-correct-low__input",e),i=l(".enp-slider-correct-high__input",e);l(".enp-slider-correct-low__label",e).text("Slider Answer Low"),l(".enp-slider-correct__helper",e).removeClass("enp-slider-correct__helper--hidden").text("to"),l(".enp-slider-correct-high__input-container",e).removeClass("enp-slider-correct-high__input-container--hidden"),l(".enp-slider-correct-answer-range",e).removeClass("enp-slider-correct-answer-range--add-range").addClass("enp-slider-correct-answer-range--remove-range").html('<svg class="enp-icon enp-slider-correct-answer-range__icon"><use xlink:href="#icon-close"><title>Remove Answer Range</title></use></svg>'),highCorrectVal=parseFloat(i.val()),lowCorrectVal=parseFloat(n.val()),increment=parseFloat(l(".enp-slider-increment__input",e).val()),highCorrectVal<=lowCorrectVal&&i.val(lowCorrectVal+increment),i.focus(),n.data("correctRangeInUse",!0)}function P(e){var n;return l(".enp-slider-options").each(function(){if(l(this).data("sliderID")===e)return n=l(this),!1}),n}function F(e){var n,i,t,o,s;sliderID=l(".enp-slider-id",e).val(),l(e).data("sliderID",sliderID),i=l(".enp-slider-id",n=e).val(),t=parseFloat(l(".enp-slider-range-low__input",n).val()),o=parseFloat(l(".enp-slider-range-high__input",n).val()),s=parseFloat(l(".enp-slider-increment__input",n).val()),t={slider_id:i,slider_range_low:t,slider_range_high:o,slider_start:R(t,o,s),slider_increment:s,slider_prefix:l(".enp-slider-prefix__input",n).val(),slider_suffix:l(".enp-slider-suffix__input",n).val(),slider_input_size:l(".enp-slider-range-high__input",n).val().length},slider=D(t),sliderExample=l('<div class="enp-slider-preview"></div>').html(slider),l(sliderExample).prependTo(n),l(".enp-slider__label",n).after('<label for="enp-slider-input__'+i+'" class="enp-label enp-label--slider-preview">Slider Preview</label>'),l(".enp-slider__label",n).remove(),B(l(".enp-slider-input__input",n),t),lowCorrectInput=l(".enp-slider-correct-low__input",e),highCorrectInput=l(".enp-slider-correct-high__input",e),lowCorrectInput.data("highCorrectInput",highCorrectInput),highCorrectInput.data("lowCorrectInput",lowCorrectInput),correctLow=parseFloat(lowCorrectInput.val()),correctHigh=parseFloat(highCorrectInput.val()),lowCorrectInput.is("[readonly]")?correctLow===correctHigh&&Q(sliderID):(l(".enp-slider-correct-high__container",e).append('<button class="enp-slider-correct-answer-range" type="button"></button>'),(correctLow===correctHigh?O:k)(sliderID)),l("input, button",e).each(function(){l(this).data("sliderID",sliderID)}),accordion={title:"Advanced Slider Options",content:l(".enp-slider-advanced-options__content",e),baseID:sliderID},accordion=enp_accordion__create_headers(accordion),enp_accordion__setup(accordion)}function M(e,n,i){if(void 0===i.responseJSON)return T(),C("Something went wrong. Please reload the page and try again.","error"),!1;var t,o,s,r,i=(e=i.responseJSON)&&e.user_action,a=(userActionAction=i?i.action:void 0,userActionElement=i?i.element:void 0,"success"===e.status&&"insert"===e.action&&(i=e,l("#enp-quiz-id").val(i.quiz_id),t=l("body").innerHTML,r="Quiz: "+(r=l(".enp-quiz-title__textarea").val()),o=quizCreate.quiz_create_url+i.quiz_id,g(i),window.history.pushState({html:t,pageTitle:r},"",o),l(".enp-quiz-form__save").show().addClass("enp-quiz-form__save--reveal"),l(".enp-btn--next-step").show().addClass("enp-btn--next-step--reveal"),l(".enp-quiz-breadcrumbs__link--preview").removeClass("enp-quiz-breadcrumbs__link--disabled")),"add"==userActionAction&&"question"==userActionElement?!1!==(i=(e=>{for(var n in e)if("insert"===e[n].action)return e[n];return!1})(e.question))&&void 0!==i.question_id&&0<parseInt(i.question_id)?(new_questionID=i.question_id,new_mcOption=d(new_questionID,e.question),new_sliderID=i.slider.slider_id,U(new_questionID,new_mcOption.mc_option_id,new_sliderID),g(e)):(l("#enp-question--newQuestionTemplateID__accordion-header").remove(),l("#enp-question--newQuestionTemplateID").remove(),C("Question could not be added. Please reload the page and try again.","error")):"delete"==userActionAction&&"question"==userActionElement?(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(u(questionID).remove(),x()):(u(questionID).removeClass("enp-question--remove"),C("Question could not be deleted. Please reload the page and try again.","error"))):"delete"==userActionAction&&"mc_option"==userActionElement?(t=e.user_action.details.mc_option_id,!1!==(mcOptionResponse=((e,n)=>{for(var i in n)for(var t in n[i].mc_option)if(parseInt(n[i].mc_option[t].mc_option_id)===parseInt(e))return n[i].mc_option[t];return!1})(t,e.question))&&"update"===mcOptionResponse.action&&"success"===mcOptionResponse.status?H(t):((r=l("#enp-mc-option--"+(r=t))).removeClass("enp-mc-option--remove"),l(".enp-mc-option__button--delete",r).focus(),C("Multiple Choice Option could not be deleted. Please reload the page and try again.","error"))):"add"==userActionAction&&"mc_option"==userActionElement?!1!==(o=d(questionID=e.user_action.details.question_id,e.question))&&void 0!==o.mc_option_id&&0<parseInt(o.mc_option_id)?y(o.mc_option_id,questionID):(i=questionID,l("#enp-question--"+i+" #enp-mc-option--newMCOptionID").remove(),C("Multiple Choice Option could not be added. Please reload the page and try again.","error")):"set_correct"==userActionAction&&"mc_option"==userActionElement?(i=e.user_action.details.mc_option_id,s=e.user_action.details.question_id,l("#enp-mc-option--"+i).hasClass("enp-mc-option--correct")?l("#enp-mc-option--"+i).removeClass("enp-mc-option--correct"):(l("#enp-question--"+s+" .enp-mc-option").removeClass("enp-mc-option--correct"),l("#enp-mc-option--"+i).addClass("enp-mc-option--correct"))):"upload"==userActionAction&&"question_image"==userActionElement?(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(s=questionResponse,questionID=s.question_id,l("#enp-question--"+questionID+" .enp-question-image-upload").remove(),l("#enp-question--"+questionID+" .enp-question-image-upload__input").remove(),l("#enp-question--"+questionID+" .enp-image-upload-wait").remove(),l("#enp-question--"+questionID+" .enp-question-image__input").val(s.question_image),templateParams={question_id:questionID,question_position:c(questionID)},l("#enp-question--"+questionID+" .enp-question-image__input").after(v(templateParams)),imageFile=(imageFile=s.question_image).replace(/-original/g,"580w"),imageURL=quizCreate.quiz_image_url+l("#enp-quiz-id").val()+"/"+questionID+"/"+imageFile,l("#enp-question--"+questionID+" .enp-question-image__container").prepend('<img class="enp-question-image enp-question-image" src="'+imageURL+'" alt="'+s.question_image_alt+'"/>')):temp_unsetAddQuestionImage(questionID)):"delete"==userActionAction&&"question_image"==userActionElement&&(questionID=e.user_action.details.question_id,!1!==(questionResponse=m(questionID,e.question))&&"update"===questionResponse.action&&"success"===questionResponse.status?(i=questionResponse,questionID=i.question_id,i=l("#enp-question--"+questionID),l(".enp-question-image__container",i).remove(),l(".enp-question-image__input",i).val(""),templateParams={question_id:questionID,question_position:c(questionID)},l(".enp-question-image__input",i).after(I(templateParams)),l(".enp-button__question-image-upload, .enp-question-image-upload__input",i).hide(),l(".enp-question-image__input",i).after(f()),l(".enp-question-image-upload",i).focus()):(i=questionID,l("#enp-question--"+i+" .enp-question-image__container").removeClass("enp-question__image--remove"),oldImageFilename=l("#enp-question-image-"+i).data("image_filename"),l("#enp-question-image-"+i).val(oldImageFilename),C("Image could not be deleted. Please reload the page and try again.","error"))),e.message);if(a&&"object"==typeof a&&(void 0!==a.success&&0<a.success.length&&C(a.success[0],"success"),a.error)&&0<a.error.length)for(var p=0;p<a.error.length;p++)C(a.error[p],"error");l(".enp-quiz-message--error").length&&(l(".enp-quiz-message--error").remove(),l(".enp-accordion-header").removeClass("question-has-error"),l(".enp-accordion-header__error").remove())}function T(){l(".enp-quiz-submit").removeClass("enp-quiz-submit--wait"),l(".enp-quiz-message--saving").remove()}function B(i,e){(slider=l('<div class="enp-slider" aria-hidden="true" role="presentation"></div>')).data("sliderID",e.slider_id),l(i).data("sliderID",e.slider_id),l(slider).slider({range:"min",value:parseFloat(e.slider_start),min:parseFloat(e.slider_range_low),max:parseFloat(e.slider_range_high),step:parseFloat(e.slider_increment),slide:function(e,n){l(i).val(n.value)}}),(sliderInputContainer=l(i).parent()).after(slider),sliderTakeRangeHelpers=E({slider_range_low:parseFloat(e.slider_range_low),slider_range_high:parseFloat(e.slider_range_high)}),sliderInputContainer.append(sliderTakeRangeHelpers)}function j(e,n){var i;return l(".enp-slider").each(function(){if(l(this).data("sliderID")===e)return i=l(this),"function"==typeof n&&n(l(this)),!1}),i}!0===new RegExp("quiz-create/new").test(S)&&l(".enp-quiz-form__save, .enp-btn--next-step").hide(),0!==l(".enp-message__item--error").length&&(p=/Question \d+/,q={},l(".enp-message__item--error").each(function(){var e=l(this).text().trim(),n=e.match(p);null!==n&&(n=n[0].replace(/Question /,""),n=parseInt(n,10)-1,q[n]||(q[n]=[]),q[n].push(e))}),l.each(q,function(e,n){e=l(".enp-question-content:eq("+e+")").prev(".enp-accordion-header");e.length&&!e.hasClass("question-has-error")&&(e.addClass("question-has-error"),e.find(".enp-accordion-header__error").remove(),n='<span class="enp-accordion-header__error" role="alert">'+n.join(" ")+"</span>",e.find(".enp-accordion-header__title").after(n))})),l(document).on("focusin",function(e){l(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()}),l(".enp-quiz-message--success").not(".enp-quiz-message--ajax").delay(5e3).fadeOut(function(){l(this).remove()}),$theQuestions=l(".enp-accordion-container"),l.each($theQuestions,function(e){t(obj=o(this))}),l(document).on("click",".enp-mc-option-image-upload__trigger",function(e){e.preventDefault(),l(this).closest(".enp-mc-option").find(".enp-mc-option-image-upload__input").trigger("click")}),l(document).on("change",".enp-mc-option-image-upload__input",function(){var e,n,i=l(this).closest(".enp-mc-option-image-upload").find(".enp-mc-option-image-preview"),t=this.files&&this.files[0];i.length&&((e=i.data("object-url"))&&(URL.revokeObjectURL(e),i.removeData("object-url")),i.empty().addClass("enp-mc-option-image-preview--hidden"),t)&&0===t.type.indexOf("image/")&&(e=URL.createObjectURL(t),t=l('<img class="enp-mc-option-image enp-mc-option-image--preview" alt="">').attr("src",e),n=l('<button type="button" class="enp-mc-option-image-preview__clear" aria-label="Remove image"><svg class="enp-icon enp-icon--delete"><use xlink:href="#icon-delete"></use></svg></button>'),i.data("object-url",e).append(t).append(n).removeClass("enp-mc-option-image-preview--hidden"))}),l(document).on("click",".enp-mc-option-image-preview__clear",function(e){e.preventDefault();var e=l(this).closest(".enp-mc-option-image-preview"),n=e.closest(".enp-mc-option-image-upload").find(".enp-mc-option-image-upload__input"),i=e.data("object-url");i&&(URL.revokeObjectURL(i),e.removeData("object-url")),n.val(""),e.empty().addClass("enp-mc-option-image-preview--hidden")}),l(document).on("keyup",".enp-question-title__textarea",function(){question_title=i(l(this).val()),l(this).closest(".enp-question-content").prev(".enp-accordion-header").find(".enp-accordion-header__title").text(question_title)}),l(document).on("click",".enp-quiz-breadcrumbs__link--preview, .enp-quiz-breadcrumbs__link--publish",function(e){e.preventDefault(),l(".enp-btn--next-step").trigger("click")}),l("#enp-quiz").append('<section class="enp-quiz-message-ajax-container" aria-live="assertive"></section>'),l(".enp-question__move").remove(),l(".enp-quiz-create__questions").sortable({handle:".enp-accordion-header",placeholder:"enp-sort__placeholder",cancel:""}),l(".enp-quiz-create__questions").on("sortstart",function(e,n){l("body").addClass("ui-sortable--sorting"),l(this).sortable("refreshPositions"),l(n.placeholder).css("height",l(n.item).height())}),l(".enp-quiz-create__questions").on("sortstop",function(e,n){l("body").removeClass("ui-sortable--sorting")}),l(".enp-quiz-create__questions").on("sortupdate",function(e,o){setTimeout(function(){var e=l(o.item).offset().top,n=e+l(o.item).outerHeight(),i=l(window).scrollTop(),t=i+l(window).height();i<n&&e<t||window.scrollTo(0,e-20)},200),x(),l(".enp-quiz-form__save").trigger("click")}),l(document).on("click",".enp-question-image-upload",function(){(imageUploadInput=l(this).siblings(".enp-question-image-upload__input")).trigger("click")}),l(document).on("change",".enp-question-image-upload__input",function(){(imageSubmit=l(this).siblings(".enp-button__question-image-upload")).trigger("click"),imageSubmit.siblings(".enp-question-image-alt__input").focus()}),l(document).on("blur",".enp-slider-range-low__input",function(){sliderID=l(this).data("sliderID"),slider=j(sliderID),sliderRangeLow=parseFloat(l(this).val()),slider.slider("option","min",sliderRangeLow),(sliderInput=l("#enp-slider-input__"+sliderID)).attr("min",sliderRangeLow),e(slider,sliderInput)}),l(document).on("input",".enp-slider-range-low__input",function(){var e=l(this).val();(sliderPreview=A(l(this),".enp-slider_input__range-helper__number--low")).text(e)}),l(document).on("input",".enp-slider-range-high__input",function(){var e=l(this).val();(sliderPreview=A(l(this),".enp-slider_input__range-helper__number--high")).text(e)}),l(document).on("blur",".enp-slider-range-high__input",function(){sliderID=l(this).data("sliderID"),slider=j(sliderID),sliderRangeHigh=parseFloat(l(this).val()),slider.slider("option","max",sliderRangeHigh),(sliderInput=l("#enp-slider-input__"+sliderID)).attr("max",sliderRangeHigh),e(slider,sliderInput)}),l(document).on("input",".enp-slider-correct-low__input",function(){!1===l(this).data("correctRangeInUse")&&(highCorrectInput=l(this).data("highCorrectInput"),lowCorrectVal=l(this).val(),highCorrectInput.val(lowCorrectVal))}),l(document).on("blur",".enp-slider-increment__input",function(){sliderID=l(this).data("sliderID"),slider=j(sliderID),sliderIncrement=parseFloat(l(this).val()),slider.slider("option","step",sliderIncrement),(sliderInput=l("#enp-slider-input__"+sliderID)).attr("step",sliderIncrement),e(slider,sliderInput)}),l(document).on("input",".enp-slider-prefix__input",function(){var e=l(this).val();(sliderPreview=A(l(this),".enp-slider-input__prefix")).text(e)}),l(document).on("input",".enp-slider-suffix__input",function(){var e=l(this).val();(sliderPreview=A(l(this),".enp-slider-input__suffix")).text(e)}),l(document).on("click",".enp-slider-correct-answer-range",function(){sliderID=l(this).data("sliderID"),(l(this).hasClass("enp-slider-correct-answer-range--add-range")?k:O)(sliderID)}),l(document).on("click",".enp-quiz-submit",function(e){if(!l(this).hasClass("enp-btn--next-step")){if(e.preventDefault(),"1"===l("#enp-quiz-new").val()&&""===l(".enp-quiz-title__textarea").val())return l(".enp-quiz-title__textarea").focus(),C("Please enter a title for your quiz.","error"),!1;if(l(this).hasClass("enp-question__button--delete"))if(!1===confirm("Are you sure you want to delete this question?"))return!1;if(l(this).hasClass("enp-quiz-submit--wait"))return!1;l(".enp-quiz-message-ajax-container").append('<div class="enp-quiz-message--saving">'+s("enp-quiz-message--saving__spinner")+'<div class="enp-quiz-message--saving__text">Saving</div></div>'),l(".enp-quiz-submit").addClass("enp-quiz-submit--wait");var n,i,t,e=l(this).val();e=e,"undefined"!=typeof tinymce&&tinymce.triggerSave(),o=document.getElementById("enp-quiz-create-form"),(o=new FormData(o)).append("enp-quiz-submit",e),o.append("action","save_quiz");-1<e.indexOf("add-question")?L():-1<e.indexOf("add-mc-option__question")?(n=/add-mc-option__question-/g,z(questionID=e.replace(n,""))):-1<e.indexOf("question--delete")?(n=/question--delete-/g,t=questionID=e.replace(n,""),(i=u(t)).addClass("enp-question--remove"),l("#enp-question--"+t),i.next().find("enp-question-content").focus()):-1<e.indexOf("mc-option--delete")?(n=/mc-option--delete-/g,t=mcOptionID=e.replace(n,""),(t=l("#enp-mc-option--"+t)).next(".enp-mc-option").find("button:first").focus(),t.addClass("enp-mc-option--remove")):-1<e.indexOf("question-image--upload")?(n=/question-image--upload-/g,questionID=e.replace(n,""),l("#enp-question--"+questionID+" .enp-question-image-upload").hide(),l("#enp-question--"+questionID+" .enp-question-image-upload").after(s("enp-image-upload-wait"))):-1<e.indexOf("question-image--delete")&&(n=/question-image--delete-/g,e=questionID=e.replace(n,""),l("#enp-question--"+e+" .enp-question-image__container").addClass("enp-question__image--remove"),imageInput=l("#enp-question-image-"+e),imageFilename=imageInput.val(),imageInput.data("image_filename",imageFilename),imageInput.val("")),l(".enp-quiz-message--success").remove(),l.ajax({type:"POST",url:quizCreate.ajax_url,data:o,processData:!1,contentType:!1}).done(M).fail(function(e,n,i){console.log("AJAX failed",e.getAllResponseHeaders(),n,i)}).then(function(e,n,i){}).always(function(){T()})}var o}),l(document).on("input",".enp-slider-input__input",function(){var e=j(l(this).data("sliderID")),n=l(this).val();e.slider("value",n),sliderVal=e.slider("value")}),l(document).on("blur",".enp-slider-input__input",function(){var e,n;input=l(this),n=j(l(this).data("sliderID")),e=input.val(),n=n.slider("value"),parseInt(n)!==parseInt(e)&&(input.val(n),input.addClass("enp-slider-input__input--invalid-animation"),setTimeout(function(){input.removeClass("enp-slider-input__input--invalid-animation")},500))})});