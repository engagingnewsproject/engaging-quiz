jQuery(document).ready(function(e){function s(s,n,i){return void 0===i.responseJSON?(t(),a("Something went wrong. Please reload the page and try again.","error"),!1):(s=e.parseJSON(i.responseJSON),o(s.message),userActionAction=s.user_action.action,userActionElement=s.user_action.element,void("success"===s.status&&"update"===s.action&&"delete"===userActionAction&&"quiz"===userActionElement&&(dashItem=e("#enp-dash-item-"+s.quiz_id),dashItem.addClass("enp-dash-item--remove"),e("#enp-quiz").removeClass("enp-dash-list--focus-one"),setTimeout(function(){dashItem.remove()},300))))}function n(e){return'<div class="spinner '+e+'"><div class="bounce bounce1"></div><div class="bounce bounce2"></div><div class="bounce bounce3"></div></div>'}function i(){e(".enp-quiz-submit").addClass("enp-quiz-submit--wait")}function t(){e(".enp-quiz-submit").removeClass("enp-quiz-submit--wait")}function a(s,n){var i=Math.floor(1e3*Math.random()+1);e(".enp-quiz-message-ajax-container").append('<div class="enp-quiz-message enp-quiz-message--ajax enp-quiz-message--'+n+" enp-container enp-message-"+i+'"><p class="enp-message__list enp-message__list--'+n+'">'+s+"</p></div>"),e(".enp-message-"+i).delay(3500).fadeOut(function(){e(".enp-message-"+i).fadeOut()})}function o(e){"undefined"!=typeof e.success&&e.success.length>0&&a(e.success[0],"success");for(var s=0;s<e.error.length;s++)a(e.error[s],"error")}e(".enp-quiz-list__view").prepend('<svg class="enp-view-toggle enp-view-toggle__grid enp-icon"><use xlink:href="#icon-grid"><title>Grid View</title></use></svg><svg class="enp-view-toggle enp-view-toggle__list enp-icon"><use xlink:href="#icon-list"><title>List View</title></use></svg>'),e(".enp-view-toggle__grid").addClass("enp-view-toggle__active"),e(document).on("click",".enp-view-toggle",function(){if(!e(this).hasClass("enp-view-toggle__active")){e(this).siblings(".enp-view-toggle").removeClass("enp-view-toggle__active"),e(this).addClass("enp-view-toggle__active");var s=e(this).parent().parent().next(".enp-dash-list");s.hasClass("enp-dash-list--list-view")?s.removeClass("enp-dash-list--list-view"):s.addClass("enp-dash-list--list-view")}}),e(".enp-dash-item__nav").addClass("enp-dash-item__nav--collapsible").before('<button class="enp-dash-item__menu-action" type="button"><svg class="enp-dash-item__menu-action__icon enp-dash-item__menu-action__icon--bottom"><use xlink:href="#icon-chevron-down" /></svg><svg class="enp-dash-item__menu-action__icon enp-dash-item__menu-action__icon--top"><use xlink:href="#icon-chevron-down" /></svg></button>'),e(document).on("click",".enp-dash-item__menu-action",function(){var s=e(this).closest(".enp-dash-item");s.hasClass("enp-dash-item--menu-active")?(s.removeClass("enp-dash-item--menu-active"),e("#enp-quiz").removeClass("enp-dash-list--focus-one")):(e(".enp-dash-item").removeClass("enp-dash-item--menu-active"),s.addClass("enp-dash-item--menu-active"),e("#enp-quiz").addClass("enp-dash-list--focus-one"),e(".enp-dash-item__nav__item:eq(0) a",s).focus())}),e(".enp-dash-item__delete").click(function(a){a.preventDefault();var o=confirm("Are you sure you want to delete this quiz?");if(o===!1)return!1;if(e(this).hasClass("enp-quiz-submit--wait"))return!1;i();var c=e(this).closest(".enp-dash-item");c.addClass("enp-dash-item--delete-wait"),c.append(n("enp-dash-item__spinner"));var u=e(".enp-dash-item__quiz-id",c).val(),l=document.getElementById("enp-delete-quiz-"+u),p=new FormData(l);p.append("enp-quiz-submit","delete-quiz"),p.append("action","save_quiz"),e.ajax({type:"POST",url:quizDashboard.ajax_url,data:p,processData:!1,contentType:!1}).done(s).fail(function(e,s,n){console.log("AJAX failed",e.getAllResponseHeaders(),s,n)}).then(function(e,s,n){}).always(function(){t()})}),e(".enp-quiz-message--welcome").length&&e(".enp-quiz-message--welcome").append('<button class="enp-quiz-message__close" type="button"><svg class="enp-quiz-message__close__icon enp-icon"><use xlink:href="#icon-close" /></svg></button>'),e(document).on("click",".enp-quiz-message__close",function(){e(this).closest(".enp-quiz-message--welcome").remove()}),e("#enp-quiz").append('<section class="enp-quiz-message-ajax-container" aria-live="assertive"></section>')});